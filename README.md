# EAL (Easy Addon Localisation)

![GitHub issues](https://img.shields.io/github/issues/DevonDF/EAL-Easy-Addon-Localisation)
![GitHub](https://img.shields.io/github/license/DevonDF/EAL-Easy-Addon-Localisation)
![GitHub all releases](https://img.shields.io/github/downloads/DevonDF/EAL-Easy-Addon-Localisation/total)
![GitHub Repo stars](https://img.shields.io/github/stars/DevonDF/EAL-Easy-Addon-Localisation)



EAL aims to make localising and translation of Garry's Mod addons much easier by
automatically finding string values that require translations and creating
templates for translators to fill in.

## How does it work?

EAL changes lua code within your addon to implement translations by replacing 
marked hard-coded strings with global variables. It will then inject itself into an autorun file
(or create one if neccessary) in order to load itself before your addon.

## Requirements

EAL requires Python 3

## Localising your addon

1. You must first mark the strings within your addon that you want to be translatable. In order to do this, simply place a single % before any string in any of the lua files in your addon. For example, if you had the code:

``local my_variable = "Hello, World!"``

simply prepend a % to make this translatable:

``local my_variable = "%Hello, World!"``

This also works for every method of creating a string in lua, including the speechmarks (""), quotation marks ('') and double brackets ([[]])

2. Place eal.py into the root of your addon folder,
e.g. the folder layout will look as such:

        - addon_name
            - lua
            - entities
            - ...
            - eal.py

3. Run the python script using:

``python eal.py``

The script will then run you through the process of localising your addon. Afterwards, EAL will create a new directory, and some new files inside the addon's lua folder:

    - lua
      - eal_addon_name
        - langs
          - en.lua
          - de.lua
          - ...
        - eal.lua

In order to now provide translations, simply give the relevant lua files inside langs/ to neccessary translators. EAL will load these language files upon startup of your addon automatically.

4. Add functionality to your addon to change the language dynamically. Simply change the constant variable ``EAL.language`` to any given language to dynamically change the language on either server or client.

5. Direct users of your addon to eal.lua under the eal_addon_name folder in order to change their default language for the server. You may of course simply copy and paste this config over into your own configuration file.


## Adding new translatable strings

Mark the new strings and run EAL again - it should handle the process for you, and retain all current translations you have. However, a word of warning, your translation files should keep to the same layout in order for this to function, i.e., one translation per line, and using speechmarks ("") for strings.

## Licensing

EAL is licensed under the MIT license. Feel free to use the code generated by EAL for your addons, either commercially or privately.

## Troubleshooting

EAL requires an autorun file to inject itself into, and thus, if you do not have one, it will create one for you. However, if you have more than one file under lua/autorun/, it will ask you to decide which file to inject itself into. The chosen file should be the entry-point of your addon, such that the global variable EAL would not be referenced by your addon before it is loaded.


